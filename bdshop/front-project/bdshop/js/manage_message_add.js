define(["jquery","template","components","ZeroClipboard","jqueryValidate","ueditorConfig","ueditorAll","manageCommon"],function(e,s,a,i,o,t,l,n){function r(){var e=!1,s=!1,i=!1,o=!1,t=!1,l=!1;a.getMsg(apiUrl+"/admin/module/module/queryModules").done(function(a){if(1==a.res)for(var n=a.obj,r=0;r<n.length;r++){var d=n[r],c=d.moduleId;d.parentId;7==c&&($("#goodsList").css("display","block"),e=!0),8==c&&($("#goodsOrder").css("display","block"),e=!0),9==c&&($("#goodsCatory").css("display","block"),e=!0),10==c&&($("#memberManage").css("display","block"),s=!0),11==c&&($("#messageManage").css("display","block"),s=!0),12==c&&($("#articleManage").css("display","block"),i=!0),13==c&&($("#adManage").css("display","block"),o=!0),14==c&&($("#goodsReport").css("display","block"),t=!0),15==c&&($("#orderReport").css("display","block"),t=!0),16==c&&($("#adminManage").css("display","block"),l=!0),17==c&&($("#roleManage").css("display","block"),l=!0),e&&$("#div1").css("display","block"),s&&$("#div2").css("display","block"),i&&$("#div3").css("display","block"),o&&$("#div4").css("display","block"),t&&$("#div5").css("display","block"),l&&$("#div6").css("display","block"),(e||s||i&&o||t||l)&&$(".container-wrap").css("display","block")}})}function d(){$("#form-box").validate({rules:{messageName:{required:!0,maxlength:20},description:{required:!0,maxlength:200},url:{maxlength:500}},messages:{messageName:{required:"名称必填",maxlength:"最多填写20个字符"},description:{required:"内容必填",maxlength:"最多填写200个字符"},url:{maxlength:"最多填写500个字符"}},submitHandler:function(e){var s=$("#form-box").serialize();a.getMsg(u,s,"post").done(function(e){console.log(e),1==e.res&&(a.Alert("success","成功"),setTimeout(function(){window.history.go(-1)},2e3))})}})}function c(e){var i=apiUrl+"/admin/message/messageAdmin/getMessageById?messageId="+e;a.getMsg(i).done(function(e){var a=e.res;if(1==a){var i=s("div-box-tpl",e);document.getElementById("div-box").innerHTML=i}})}function m(){var e=apiUrl+"/admin/user/userAdmin/getUserByPage",i=$("#form-box").serialize();a.getMsg(e,i,"post").done(function(e){var a=e.res;if(1==a){var i=s("list-tpl",e.obj);document.getElementById("list").innerHTML=i}})}r();var g=new Array,p=a.GetQueryString("id"),u="";p?(u=apiUrl+"/admin/message/messageAdmin/editMessage?messageId="+p,$("#addState").text("编辑消息"),c(p),m()):(u=apiUrl+"/admin/message/messageAdmin/addMessage",$("#addState").text("添加消息"),m()),$(".form-control").focus(function(){$(this).parent("td").parent("tr").find("a").html($(this).val().length)}),$(".form-control").blur(function(){$(this).parent("td").parent("tr").find("a").html($(this).val().length)}),$("#s1").blur(m),$("#s2").blur(m),$("#s3").blur(m),$("#s4").blur(m),d(),$("#list").on("click","tr",function(){var e=$(this).attr("data");if(g.indexOf(e)>-1)alert("请勿重复添加");else{g.push(e);var s=$(this).clone(),a=s.append('<td class="del" style="color: red">删除</td>');$("#chosen-box").append(a),$("#userIds").val(g)}}),$("#chosen-box").on("click",".del",function(){var e=$(this).parent("li").index();$(this).parent().remove(),g.splice(e,1),$("#userIds").val(g)})});