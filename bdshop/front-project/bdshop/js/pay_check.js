define(["jquery","components","common","weui"],function(t,e,n,a){function o(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:S,timeStamp:l,nonceStr:m,"package":y,signType:"MD5",paySign:s},function(t){"get_brand_wcpay_request:ok"==t.err_msg?window.location="/pages/bdshop/page/pay_success.html":$.toast("支付失败","text")})}function r(){$.post(apiUrl+"/wxpay/pay",{orderNumber:d,openid:"oFxaJw5Ejp1DfwZZEzUUzDZAHIRU"},function(t){return t=JSON.parse(t),0==t.return_code?void $.toast("下单失败","text"):(s=t.sign.toString(),m=t.nonceStr.toString(),y=t.packageStr.toString(),S=t.appId.toString(),l=t.timeStamp.toString(),void("undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o)):o()))})}function i(t,e){var n,a,o;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{a=e.toString().split(".")[1].length}catch(r){a=0}return o=Math.pow(10,Math.max(n,a)),(c(t,o)-c(e,o))/o}function c(t,e){var n=0,a=t.toString(),o=e.toString();try{n+=a.split(".")[1].length}catch(r){}try{n+=o.split(".")[1].length}catch(r){}return Number(a.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)}var p,d=e.GetQueryString("orderNumber"),u=e.GetQueryString("price"),g=u.indexOf(".");u=parseFloat(u),p=g<0?u+".00":u,$("#total-money").text(p),$("#total-money2").text("¥"+p),u>1e4?($("#pay-accounts-box").removeClass("hide"),$("#outstand-amount").text(i(u,1e4))):($("#full-payout-box").removeClass("hide"),$("#pay-amount").text(u)),$("#pay-btn").click(function(){r()});var s,m,y,S,l});