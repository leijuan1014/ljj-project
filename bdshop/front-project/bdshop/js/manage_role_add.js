define(["jquery","template","components","jqueryValidate","manageCommon"],function(e,s,o,a,r){function i(){var e=!1,s=!1,a=!1,r=!1,i=!1,d=!1;o.getMsg(apiUrl+"/admin/module/module/queryModules").done(function(o){if(1==o.res)for(var l=o.obj,n=0;n<l.length;n++){var t=l[n],c=t.moduleId;t.parentId;7==c&&($("#goodsList").css("display","block"),e=!0),8==c&&($("#goodsOrder").css("display","block"),e=!0),9==c&&($("#goodsCatory").css("display","block"),e=!0),10==c&&($("#memberManage").css("display","block"),s=!0),11==c&&($("#messageManage").css("display","block"),s=!0),12==c&&($("#articleManage").css("display","block"),a=!0),13==c&&($("#adManage").css("display","block"),r=!0),14==c&&($("#goodsReport").css("display","block"),i=!0),15==c&&($("#orderReport").css("display","block"),i=!0),16==c&&($("#adminManage").css("display","block"),d=!0),17==c&&($("#roleManage").css("display","block"),d=!0),e&&$("#div1").css("display","block"),s&&$("#div2").css("display","block"),a&&$("#div3").css("display","block"),r&&$("#div4").css("display","block"),i&&$("#div5").css("display","block"),d&&$("#div6").css("display","block"),(e||s||a&&r||i||d)&&$(".container-wrap").css("display","block")}})}function d(e){var a=apiUrl+"/admin/role/role/getRoleInfo?roleId="+e;o.getMsg(a).done(function(e){var o=e.res;if(1==o){var a=s("div-box-tpl",e);document.getElementById("div-box").innerHTML=a}}),a=apiUrl+"/admin/role/role/queryAllRoleType",o.getMsg(a).done(function(e){e.res})}function l(){$("#form-box").validate({rules:{state:{required:!0},adminName:{required:!0},password:{required:!0,minlength:6},lastpass:{required:!0,minlength:6,equalTo:"#passWd"},companyName:{required:!0},description:{required:!0}},messages:{state:{required:"请选择一个"},adminName:{required:"管理账号名称"},password:{required:"密码请填写",minlength:"密码长度不能小于 6 个字符"},lastpass:{required:"请输入密码",minlength:"密码长度不能小于 6 个字符",equalTo:"两次密码输入不一致"},companyName:{required:"公司名称请填写"},description:{required:"简要描述请填写"}},submitHandler:function(e){var s=$("#form-box").serialize();o.getMsg(t,s,"post").done(function(e){1==e.res?(o.Alert("success","添加成功"),setTimeout(function(){window.history.go(-1)},2e3)):410==e.res?o.Alert("success","管理账号名称已存在"):411==e.res?o.Alert("success","管理账号名称已存在"):o.Alert("success","失败")})}})}i();var n=o.GetQueryString("id"),t="";n?(t=apiUrl+"/admin/role/role/editRole?roleId="+n,$("#addState").text("编辑角色"),d(n)):(t=apiUrl+"/admin/role/role/addRole",$("#addState").text("添加角色")),l()});