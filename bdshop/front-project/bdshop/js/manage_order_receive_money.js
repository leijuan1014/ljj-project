define(["jquery","components","template","manageCommon","bootstrap","jqueryValidate"],function(e,s,o,a,i,r){function d(){var e=!1,o=!1,a=!1,i=!1,r=!1,d=!1;s.getMsg(apiUrl+"/admin/module/module/queryModules").done(function(s){if(1==s.res)for(var l=s.obj,c=0;c<l.length;c++){var n=l[c],t=n.moduleId;n.parentId;7==t&&($("#goodsList").css("display","block"),e=!0),8==t&&($("#goodsOrder").css("display","block"),e=!0),9==t&&($("#goodsCatory").css("display","block"),e=!0),10==t&&($("#memberManage").css("display","block"),o=!0),11==t&&($("#messageManage").css("display","block"),o=!0),12==t&&($("#articleManage").css("display","block"),a=!0),13==t&&($("#adManage").css("display","block"),i=!0),14==t&&($("#goodsReport").css("display","block"),r=!0),15==t&&($("#orderReport").css("display","block"),r=!0),16==t&&($("#adminManage").css("display","block"),d=!0),17==t&&($("#roleManage").css("display","block"),d=!0),e&&$("#div1").css("display","block"),o&&$("#div2").css("display","block"),a&&$("#div3").css("display","block"),i&&$("#div4").css("display","block"),r&&$("#div5").css("display","block"),d&&$("#div6").css("display","block"),(e||o||a&&i||r||d)&&$(".container-wrap").css("display","block")}})}function l(e){var a=apiUrl+"/admin/order/orderAdmin/getOrderByOrderNumber?orderNumber="+e;s.getMsg(a,"post").done(function(e){var a=e.res;if(1==a){var i=o("orderinfo-tpl",e);document.querySelector("#orderinfo").innerHTML=i,1==e.obj.state&&$(".dis").css("display","none")}else s.Alert("","出错了！")})}function c(){$("#div-box").on("change","#pic-upload",function(){var e=new FormData;e.append("param",""),e.append("file",$("#pic-upload")[0].files[0]);var s=apiUrl+"/upload/uploadimg/dydz/money";$.ajax({url:s,type:"POST",dataType:"json",data:e,processData:!1,contentType:!1,success:function(e){var s='<li picUrl="'+e.result+'"class="apply-book"> <img  src=" '+apiUrlPic+e.result+'"> <a docUrl="'+e.result+'" href="javascript:void(0)" class="text-basic del-doc iconfont icon-close"></a></li>';$("#pic-document-list").append(s)}})})}function n(){$("#sePw").validate({rules:{logisticsNumber:{required:!0}},messages:{logisticsNumber:{required:"请输入物流单号"}},submitHandler:function(e){$("#pic-document-list > li").each(function(){atr+=$(this).attr("picUrl")+","});var o=/,$/gi;atr=atr.replace(o,"");var a=$("#sePw").serialize()+"&image="+atr;$("#logNumber").val();s.getMsg(apiUrl+"/admin/order/orderAdmin/receiveMoney",a,"post").done(function(e){1==e.res?(s.Alert("success","发货成功"),$("#send-modal").modal("hide"),setTimeout(function(){window.history.go(-1)},2e3)):($("#send-modal").modal("hide"),s.Alert("","失败"))})}})}d();var t=s.GetQueryString("id");s.GetQueryString("sendState"),s.GetQueryString("orderId"),s.GetQueryString("state");l(t),$("#box-list-content").on("click",".modal-send",function(){$("#modal-send").modal({show:!0})}),c(),n()});