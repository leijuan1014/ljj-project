define(["jquery","template","components","ZeroClipboard","jqueryValidate","ueditorConfig","ueditorAll","manageCommon"],function(s,e,a,i,d,t,o,l){function n(){var s=!1,e=!1,i=!1,d=!1,t=!1,o=!1;a.getMsg(apiUrl+"/admin/module/module/queryModules").done(function(a){if(1==a.res)for(var l=a.obj,n=0;n<l.length;n++){var r=l[n],c=r.moduleId;r.parentId;7==c&&($("#goodsList").css("display","block"),s=!0),8==c&&($("#goodsOrder").css("display","block"),s=!0),9==c&&($("#goodsCatory").css("display","block"),s=!0),10==c&&($("#memberManage").css("display","block"),e=!0),11==c&&($("#messageManage").css("display","block"),e=!0),12==c&&($("#articleManage").css("display","block"),i=!0),13==c&&($("#adManage").css("display","block"),d=!0),14==c&&($("#goodsReport").css("display","block"),t=!0),15==c&&($("#orderReport").css("display","block"),t=!0),16==c&&($("#adminManage").css("display","block"),o=!0),17==c&&($("#roleManage").css("display","block"),o=!0),s&&$("#div1").css("display","block"),e&&$("#div2").css("display","block"),i&&$("#div3").css("display","block"),d&&$("#div4").css("display","block"),t&&$("#div5").css("display","block"),o&&$("#div6").css("display","block"),(s||e||i&&d||t||o)&&$(".container-wrap").css("display","block")}})}function r(s){var i=apiUrl+"/admin/message/messageAdmin/getMessageById?messageId="+s;a.getMsg(i).done(function(s){var a=s.res;if(1==a){var i=s.obj.userIds,d=e("div-box-tpl",s);document.getElementById("div-box").innerHTML=d,u=s.obj.pushTime,b=s.obj.push,c(i)}})}function c(s){var i=0,d=10,t={userIds:s,pageNo:i,pageSize:d},o=apiUrl+"/admin/user/userAdmin/getUsersByUserIds";a.getMsg(o,t,"post").done(function(s){var a=s.res;if(1==a){s=s.obj;for(var i=0;i<s.dataList.length;i++)s.dataList[i].pushTime=u,s.dataList[i].push=b;var d=e("table-list-tpl",s);document.getElementById("table-list-content").innerHTML=d}})}n();var g=a.GetQueryString("pushNowState"),p=a.GetQueryString("id"),m="";1==g?(m=apiUrl+"/admin/message/message/editMessage?messageId="+p,$("#addState").text("查看消息"),$("#submit-btn").css("display","none"),r(p)):(g=2,m=apiUrl+"/admin/message/message/pushMessage?messageId="+p+"&pushState="+g,$("#addState").text("立即推送"),r(p)),$("#submit-btn").click(function(){var s=apiUrl+"/admin/message/message/pushMessage?messageId="+p+"&pushState="+g;a.getMsg(s).done(function(s){var e=s.res;1==e&&(a.Alert("success","推送成功"),setTimeout(function(){window.location.href="/pages/bdshop/page/manage_message_list.html"},2e3))})});var u,b});