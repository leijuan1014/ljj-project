define(["jquery","components","bootstrap","manageCommon","jqueryValidate","highcharts"],function(e,t,o,i,r,n){function a(){var e=!1,o=!1,i=!1,r=!1,n=!1,a=!1;t.getMsg(apiUrl+"/admin/module/module/queryModules").done(function(t){if(1==t.res)for(var s=t.obj,l=0;l<s.length;l++){var d=s[l],c=d.moduleId;d.parentId;7==c&&($("#goodsList").css("display","block"),e=!0),8==c&&($("#goodsOrder").css("display","block"),e=!0),9==c&&($("#goodsCatory").css("display","block"),e=!0),10==c&&($("#memberManage").css("display","block"),o=!0),11==c&&($("#messageManage").css("display","block"),o=!0),12==c&&($("#articleManage").css("display","block"),i=!0),13==c&&($("#adManage").css("display","block"),r=!0),14==c&&($("#goodsReport").css("display","block"),n=!0),15==c&&($("#orderReport").css("display","block"),n=!0),16==c&&($("#adminManage").css("display","block"),a=!0),17==c&&($("#roleManage").css("display","block"),a=!0),e&&$("#div1").css("display","block"),o&&$("#div2").css("display","block"),i&&$("#div3").css("display","block"),r&&$("#div4").css("display","block"),n&&$("#div5").css("display","block"),a&&$("#div6").css("display","block"),(e||o||i&&r||n||a)&&$(".container-wrap").css("display","block")}})}function s(e){var o=apiUrl+"/admin/order/orderAdmin/getUnpaidMoney?orderId="+e;t.getMsg(o).done(function(e){1==e.res&&(sendState=e.obj.sendState,$("#sur").text(e.obj.unpaidAmount/100),$("#all").text(e.obj.totalAmount/100),$("#paid").text(e.obj.paidAmount/100),$("#unpaid").text(e.obj.unpaidAmount/100))})}function l(){$("#rePw").validate({rules:{logisticsNumber:{required:!0}},messages:{logisticsNumber:{required:"请输入物流单号"}},submitHandler:function(e){var o=$("#logNumber").val(),i={logisticsNumber:o,orderId:b};t.getMsg(apiUrl+"/admin/order/orderAdmin/toSend",i,"post").done(function(e){1==e.res?(t.Alert("success","发货成功"),$("#send-modal").modal("hide"),setTimeout(function(){location.reload()},2e3)):($("#send-modal").modal("hide"),t.Alert("","发货失败"))})}})}function d(){var e=apiUrl+"/admin/order/orderAdmin/getOrderByPaystate";t.getMsg(e).done(function(e){if(1==e.res){var t=e.obj,o="订单金额比例（元）";c(t,o)}})}function c(e,t){Highcharts.setOptions({colors:["#058DC7","red"]}),$("#container").highcharts({chart:{type:"pie"},credits:{enabled:!0,href:"",text:""},title:{text:t,align:"left",floating:"true",verticalAlign:"top",x:0,y:100},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>:"+g(this.percentage)+" %   共"+this.point.y/100+"元 "}},plotOptions:{pie:{size:150,allowPointSelect:!0,cursor:"pointer",dataLabels:{distance:20,enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>:"+g(this.percentage)+" %"}},showInLegend:!1}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:0,y:80,borderWidth:0,labelFormatter:function(){return this.name+"&nbsp"},useHTML:!0},series:[{type:"pie",data:e}]})}function p(){var e=apiUrl+"/admin/order/orderAdmin/getCountByPaystate";t.getMsg(e).done(function(e){if(1==e.res){var t=e.obj,o="订单数量比例（个）";u(t,o)}})}function u(e,t){Highcharts.setOptions({colors:["#058DC7","red"]}),$("#container2").highcharts({chart:{type:"pie"},credits:{enabled:!0,href:"",text:""},title:{text:t,align:"left",floating:"true",verticalAlign:"top",x:0,y:100},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>:"+g(this.percentage)+" %   共"+this.point.y+"个 "}},plotOptions:{pie:{size:150,allowPointSelect:!0,cursor:"pointer",dataLabels:{distance:20,enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>:"+g(this.percentage)+" %"}},showInLegend:!1}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:0,y:80,borderWidth:0,labelFormatter:function(){return this.name+"&nbsp"},useHTML:!0},series:[{type:"pie",data:e}]})}function g(e){var t=parseFloat(e);if(isNaN(t))return!1;var t=Math.round(100*e)/100;return t}a(),listUrl=apiUrl+"/admin/order/orderAdmin/getOrderByPage",require(["./table"]);var b;$("#table-list-content").on("click",".send-modal",function(){b=$(this).attr("oid"),$("#send-modal").modal({show:!0})}),$("#table-list-content").on("click",".surplus-modal",function(){var e=$(this).attr("orid");$("#surplus-modal").modal({show:!0}),s(e)}),l(),d(),p()});