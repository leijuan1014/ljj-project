function getRow(e){var t=e.parentNode.parentNode.rowIndex;return t}function delRow(e){document.getElementById("table").deleteRow(getRow(e))}function cleanAddInput(){document.getElementById("id_unitName").value="",document.getElementById("id_retailPrice").value="",document.getElementById("id_buyPrice").value="",document.getElementById("id_wholesalePrice").value=""}function showAddInput(){$("#del-modal").modal("show"),document.getElementById("btn_add").style.display="",cleanAddInput(),document.getElementById("form-box").style.display="none"}function hideAddInput(){cleanAddInput(),$("#del-modal").modal("hide"),document.getElementById("form-box").style="display:"}function judge(){var e=document.getElementById("id_unitName").value,t=document.getElementById("id_retailPrice").value,n=document.getElementById("id_buyPrice").value,l=document.getElementById("id_wholesalePrice").value,r=!0;return""==e||e.length>18?(r=!1,alert("请重新输入规格/单位")):""==n||""==n||""==l?(r=!1,alert("请输入价格")):(t=parseInt(100*t)/100,n=parseInt(100*n)/100,l=parseInt(100*l)/100,document.getElementById("id_retailPrice").value=t,document.getElementById("id_buyPrice").value=n,document.getElementById("id_wholesalePrice").value=l,(n<0||t<0||l<0)&&(r=!1,alert("价格不能为负数"))),r}function insertInfo(){var e=new Array;e[0]=0,e[1]=document.getElementById("id_unitName").value,e[2]=document.getElementById("id_buyPrice").value,e[3]=document.getElementById("id_retailPrice").value,e[4]=document.getElementById("id_wholesalePrice").value,e[5]="<a style='text-align:center;color:blue;cursor:pointer;' onclick='delRow(this);'>删除</a>";for(var t=document.getElementById("table").insertRow(1),n=0;n<e.length;n++)t.insertCell(n).innerHTML=e[n];t.cells[0].style.display="none"}function addInfo(){1==judge()&&(insertInfo(),hideAddInput())}function getAllTableData(){var e=document.getElementById("table"),t=new Array;if(e.rows.length>=2){for(var n=1;n<e.rows.length;n++){var l=e.rows,r=l[n],d=new GoodsPrice("","","","",""),i=r.cells;d.priceId=e.rows[n].cells[0].innerHTML,d.unitName=i[1].innerHTML,d.buyPrice=100*i[2].innerHTML,d.retailPrice=100*i[3].innerHTML,d.wholesalePrice=100*i[4].innerHTML,t[n-1]=d}return t}}function initAllTableData(e){var t=document.getElementById("table"),n=new Array;if(t.rows.length>=2){for(var l=1;l<t.rows.length;l++){var r=t.rows,d=r[l],i=new GoodsPrice("","","","",""),a=d.cells;i.priceId=t.rows[l].cells[0].innerHTML,i.unitName=a[1].innerHTML,i.buyPrice=a[2].innerHTML,i.retailPrice=a[3].innerHTML,i.wholesalePrice=a[4].innerHTML,n[l-1]=i}return n}}function GoodsPrice(e,t,n,l,r){this.priceId=e,this.unitName=t,this.retailPrice=l,this.buyPrice=n,this.wholesalePrice=r}var row=0,reg_email=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,reg_name=/^((\w*\d\w*[a-z]\w*)|(\w*[a-z]\w*\d\w*))$/i,reg_chinese=/^[\u0391-\uFFE5]+$/,reg_pass=/^((\w*\d\w*[a-z]\w*)|(\w*[a-z]\w*\d\w*))$/i,reg_price=/^([0-9]*)+(.[0-9]{1,2})?$/;