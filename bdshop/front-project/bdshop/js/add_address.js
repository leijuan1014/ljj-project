define(["jquery","components","common","weui","cityPicker","template"],function(e,t,i,r,n,c){function a(){t.getMsg(apiUrl+"/front/receive/receive/getReceiveById?receiveId="+u).done(function(e){var t=e.res;if(1==t){x=!0,p=!0,y=!0,e=e.obj;var i=c("add-address-tpl",e);document.getElementById("add-address-box").innerHTML=i,d(),v(),o(u)}})}function o(e){$("#save-btn").click(function(){var i=$("#city-picker").val();if(null!=i){var r=i.split(" ");$("#receiveProvince").val(r[0]),$("#receiveCity").val(r[1]),$("#receiveCounty").val(r[2])}var n=$("#add-address-box").serialize(),c="";e?(n=n+"&receiveId="+e,c=apiUrl+"/front/receive/receive/editReceive"):c=apiUrl+"/front/receive/receive/addReceive",x?p?y?t.getMsg(c,n,"post").done(function(e){var t=e.res;1==t&&$.toast(f,"text",function(){window.history.go(-1)})}):$.toast(m,"text"):$.toast(b,"text"):$.toast(g,"text")})}function v(){var e=$("#phone"),t=$("#userName"),i=$("#address");t.blur(function(){var e=$(this).val();0==s(e)?($.toast("请输入姓名","text"),p=!1,b="请输入姓名"):p=!0}),e.blur(function(){var e=$(this).val(),t=/^1([3578]\d|4[57])\d{8}$/;0==s(e)?($.toast("请输入手机号码","text"),x=!1,g="请输入手机号码"):t.test(e)?x=!0:($.toast("手机格式错误","text"),x=!1,g="手机格式错误")}),i.blur(function(){var e=$(this).val();0==s(e)?($.toast("请输入详细地址","text"),y=!1,m="请输入详细地址"):y=!0})}function s(e){return e.replace(/[^\x00-xff]/g,"xx").length}function d(){$("#city-picker").cityPicker({title:"选择地址"})}function l(e){$("#city-picker").val(e)}var u=t.GetQueryString("id"),f="",x=!1,p=!1,y=!1,g="请输入手机号码",b="请输入收货人姓名",m="请输入详细地址";u?(a(),f="编辑成功"):(l("广东省 佛山市 南海区"),d(),v(),o(),f="添加成功")});