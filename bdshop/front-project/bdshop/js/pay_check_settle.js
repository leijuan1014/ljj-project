define(["jquery","components","common","weui"],function(t,e,n,i){function r(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:x,timeStamp:f,nonceStr:S,"package":"prepay_id="+h,signType:"MD5",paySign:l},function(t){"get_brand_wcpay_request:ok"==t.err_msg?window.location="/pages/bdshop/page/pay_success.html":$.toast("支付失败","text")})}function a(){$.post(apiUrl+"/wxpay/pay",{orderNumber:u},function(t){return t.code==-1?void $.toast("下单失败","text"):(l=t.paySign.toString(),S=t.nonce_str.toString(),h=t.prepay_id.toString(),x=t.appid.toString(),f=t.timeStamp.toString(),alert(l),void("undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",r),document.attachEvent("onWeixinJSBridgeReady",r)):r()))})}function o(){$.post(apiUrl+"/alipay/pay",{orderNumber:u},function(t){if(t.code==-1)return void $.toast("下单失败","text")})}function c(t,e){var n,i,r;try{n=t.toString().split(".")[1].length}catch(a){n=0}try{i=e.toString().split(".")[1].length}catch(a){i=0}return r=Math.pow(10,Math.max(n,i)),(p(t,r)-p(e,r))/r}function p(t,e){var n=0,i=t.toString(),r=e.toString();try{n+=i.split(".")[1].length}catch(a){}try{n+=r.split(".")[1].length}catch(a){}return Number(i.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,n)}var d,u=e.GetQueryString("orderNumber"),g=e.GetQueryString("price"),y=e.GetQueryString("startTime"),s=e.GetQueryString("endTime"),m=g.indexOf(".");g=parseFloat(g),d=m<0?g+".00":g,$("#total-money").text(d),$("#total-money2").text("¥"+d),$("#time").text("确认结算： "+y+"至"+s+"订单费用"),g>1e4?($("#pay-accounts-box").removeClass("hide"),$("#outstand-amount").text(c(g,1e4))):($("#full-payout-box").removeClass("hide"),$("#pay-amount").text(g)),$("#pay-btn").click(function(){$("#x11")[0].checked?a():o()});var l,S,h,x,f});