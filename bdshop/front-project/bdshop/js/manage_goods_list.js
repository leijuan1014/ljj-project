define(["jquery","template","components","bootstrap","jqueryValidate","paginator","manageCommon"],function(e,a,t,o,s,n,i){function l(){var e=!1,a=!1,o=!1,s=!1,n=!1,i=!1;t.getMsg(apiUrl+"/admin/module/module/queryModules").done(function(t){if(1==t.res)for(var l=t.obj,d=0;d<l.length;d++){var c=l[d],r=c.moduleId;c.parentId;7==r&&($("#goodsList").css("display","block"),e=!0),8==r&&($("#goodsOrder").css("display","block"),e=!0),9==r&&($("#goodsCatory").css("display","block"),e=!0),10==r&&($("#memberManage").css("display","block"),a=!0),11==r&&($("#messageManage").css("display","block"),a=!0),12==r&&($("#articleManage").css("display","block"),o=!0),13==r&&($("#adManage").css("display","block"),s=!0),14==r&&($("#goodsReport").css("display","block"),n=!0),15==r&&($("#orderReport").css("display","block"),n=!0),16==r&&($("#adminManage").css("display","block"),i=!0),17==r&&($("#roleManage").css("display","block"),i=!0),e&&$("#div1").css("display","block"),a&&$("#div2").css("display","block"),o&&$("#div3").css("display","block"),s&&$("#div4").css("display","block"),n&&$("#div5").css("display","block"),i&&$("#div6").css("display","block"),(e||a||o&&s||n||i)&&$(".container-wrap").css("display","block")}})}function d(){$("#table-list-content").on("click",".del-btn",function(){var e=apiUrl+"/admin/goods/goodsAdmin/delGoodsById?goodsId="+$(this).attr("god");$("#del-modal").modal("show"),$("#submit-btn").click(function(){t.getMsg(e).done(function(e){1==e.res?(t.Alert("success","删除成功"),location.reload(),$("#del-modal").modal("hide")):t.Alert("","删除失败")})})})}function c(e,o,s){var n=apiUrl+"/admin/productcategory/productcategory/getAllNormalChildCategoryByCategoryId?categoryId="+o;t.getMsg(n).done(function(t){var o=t.res;if(1==o){var n=t.obj;t.dataList=n;var i=a("levelCategoryDataList",t);i="firstLevelList"==e?'<option  value="">一级分类</option>'+i:'<option  value="">二级分类</option>'+i,$("#"+e).html(i),s&&$("#"+e).val(s)}})}function r(e){var a='<option  value="">二级分类</option>';$("#secondLevelList").html(a),c("secondLevelList",e,0),$("#categoryId").val(e)}function g(e){if(""==e){var a=document.getElementById("firstLevelList"),t=a.options[a.selectedIndex].value;$("#categoryId").val(t)}else $("#categoryId").val(e)}function p(){c("firstLevelList",0,0),$("#firstLevelList").on("change",function(){var e=document.getElementById("firstLevelList"),a=e.options[e.selectedIndex].value;r(a)}),$("#secondLevelList").on("change",function(){var e=document.getElementById("secondLevelList"),a=e.options[e.selectedIndex].value;g(a)})}function u(e){$("#cloading").removeClass("hidden");var a=10,o=$("#form-box").serialize();o=o+"&pageSize="+a;var s=$("#isMarketable").val();o=o+"&isMarketable="+s,m=o,o=o+"&pageNo="+e;var n=listUrl;t.getMsg(n,o,"post").done(function(e){var a=e.res;if(1==a){e=e.obj,v(e);var s={bootstrapMajorVersion:3,currentPage:1,totalPages:1,itemTexts:function(e,a,t){switch(e){case"first":return"首页";case"prev":return"上一页";case"next":return"下一页";case"last":return"末页";case"page":return a}},onPageClicked:function(e,a,o,s){$("#cloading").removeClass("hidden");var i=m;i=i+"&pageNo="+s,t.getMsg(n,i,"post").done(function(e){v(e.obj)})}};s.totalPages=e.pages,$(".page-sum").html('当前页面总数：<span class="text-333">'+e.pages+'</span> 当前总个数：<span class="text-333">'+e.total+"</span>"),$("#cloading").addClass("hidden"),$("#pagination").bootstrapPaginator(s),$("#pagination li").removeClass("active").eq(o.pageNo-1).addClass("active"),1==s.totalPages?$("#pagination").hide():$("#pagination").show()}else document.getElementById("table-list-tpl").innerHTML="没有数据",$("#cloading").addClass("hidden"),$(".page-sum").html(""),$("#pagination").hide(),document.getElementById("table-list-content").innerHTML="没有数据"})}function v(e){var t=a("table-list-tpl",e);document.getElementById("table-list-content").innerHTML=t}var m="";l(),listUrl=apiUrl+"/admin/goods/goodsAdmin/getGoodsByPage",d(),$("#submit-btn-query").on("click",function(){u(1)}),p(),u(1)});