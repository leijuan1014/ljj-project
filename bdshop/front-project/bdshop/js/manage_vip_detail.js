define(["jquery","template","components","jqueryValidate","manageCommon"],function(e,s,i,o,r){function a(){var e=!1,s=!1,o=!1,r=!1,a=!1,n=!1;i.getMsg(apiUrl+"/admin/module/module/queryModules").done(function(i){if(1==i.res)for(var l=i.obj,c=0;c<l.length;c++){var d=l[c],t=d.moduleId;d.parentId;7==t&&($("#goodsList").css("display","block"),e=!0),8==t&&($("#goodsOrder").css("display","block"),e=!0),9==t&&($("#goodsCatory").css("display","block"),e=!0),10==t&&($("#memberManage").css("display","block"),s=!0),11==t&&($("#messageManage").css("display","block"),s=!0),12==t&&($("#articleManage").css("display","block"),o=!0),13==t&&($("#adManage").css("display","block"),r=!0),14==t&&($("#goodsReport").css("display","block"),a=!0),15==t&&($("#orderReport").css("display","block"),a=!0),16==t&&($("#adminManage").css("display","block"),n=!0),17==t&&($("#roleManage").css("display","block"),n=!0),e&&$("#div1").css("display","block"),s&&$("#div2").css("display","block"),o&&$("#div3").css("display","block"),r&&$("#div4").css("display","block"),a&&$("#div5").css("display","block"),n&&$("#div6").css("display","block"),(e||s||o&&r||a||n)&&$(".container-wrap").css("display","block")}})}function n(e){var o=apiUrl+"/admin/user/userAdmin/getUserById?userId="+e;i.getMsg(o,"post").done(function(e){var o=e.res;if(1==o){e.obj.image=apiUrlPic+e.obj.image;var r=s("list-box-tpl",e);document.querySelector("#userDetail").innerHTML=r}else i.Alert("","出错了！")})}function l(e){var o=apiUrl+"/admin/user/userAdmin/queryUserHigherPayment?userId="+e;i.getMsg(o,"post").done(function(e){var o=e.res;if(1==o){var r=s("method-tp",e);document.querySelector("#method").innerHTML=r}else i.Alert("","出错了！")})}function c(e){var o=apiUrl+"/admin/user/userAdmin/queryUserPrivilege?userId="+e;i.getMsg(o,"post").done(function(e){var o=e.res;if(1==o){var r=s("privilege-tp",e);document.querySelector("#privilege").innerHTML=r}else i.Alert("","出错了！")})}function d(){$("#form-box").validate({submitHandler:function(e){var s=apiUrl+"/admin/user/userAdmin/editUser",o=0,r=100,a=0;$("#isDiscount")[0].checked&&(a=1,r=$("#discount").val()),$("#isWholeSalePrice")[0].checked&&(o=1);for(var n=document.getElementsByName("paymentbox"),l="",c=0;c<n.length;c++)n[c].checked&&(0!=l.length&&(l+=","),l+=n[c].value);var d={userId:t,paymentString:l,discount:r,isDiscount:a,isWholeSalePrice:o};i.getMsg(s,d,"post").done(function(e){1==e.res?(i.Alert("success","分配成功"),setTimeout(function(){window.history.go(-1)},2e3)):i.Alert("success","失败")})}})}a();var t=i.GetQueryString("id");n(t),l(t),c(t),d()});